<!DOCTYPE html>
<html lang="en">
<head>
    <title>Raspberry Pi Rover Controller</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://use.fontawesome.com/567211ed64.js"></script>

    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>

<div class="container">
    <div class="page-header">
        <h1>Raspberry Pi Rover Controller</h1>
        <h4>GUI based programmatic control of the piRover robot</h4>
    </div>
    <div class="row">
        <div class="col-md-2 col-lg-2">
            <h2>Commands</h2>
            <button id="btn_forward" class="btn btn-lg btn-block command">Forward <i class="fa fa-arrow-up pull-right"
                                                                                     aria-hidden="true"></i></button>
            <button id="btn_backward" class="btn btn-lg btn-block command">Backward <i
                    class="fa fa-arrow-down pull-right" aria-hidden="true"></i></button>
            <button id="btn_turnright" class="btn btn-lg btn-block command">Turn Right <i
                    class="fa fa-arrow-right pull-right" aria-hidden="true"></i></button>
            <button id="btn_turnleft" class="btn btn-lg btn-block command">Turn Left <i
                    class="fa fa-arrow-left pull-right" aria-hidden="true"></i></button>
            <button id="btn_sound" class="btn btn-lg  btn-block command">Play Sound <i
                    class="fa fa-volume-up pull-right" aria-hidden="true"></i></button>
            <button id="btn_disc" class="btn btn-lg btn-block command">Fire disc <i class="fa fa-rocket pull-right"
                                                                                    aria-hidden="true"></i></button>
            <button id="btn_sub1" class="btn btn-lg btn-block command" disabled>Subroutine 1 <i
                    class="fa fa-terminal pull-right" aria-hidden="true"></i></button>
            <button id="btn_sub2" class="btn btn-lg btn-block command" disabled>Subroutine 2 <i
                    class="fa fa-terminal pull-right" aria-hidden="true"></i></button>
        </div>
        <div class="col-md-5 col-lg-3">
            <h2>Program</h2>
            <table id="mainPrg" class="table table-striped">
                <!--
                <tr>
                    <td>1</td>
                    <td id="cmd1"><span>some command</span>
                        <button class="btn btn-lg btn-link pull-right"><i class="fa fa-times-circle"
                                                                          aria-hidden="true"></i></button>
                    </td>
                </tr>
                <tr>
                    <td>2</td>
                    <td id="cmd2"></td>
                </tr>
                <tr>
                    <td>3</td>
                    <td id="cmd3"></td>
                </tr>
                <tr>
                    <td>4</td>
                    <td id="cmd4"></td>
                </tr>
                <tr>
                    <td>5</td>
                    <td id="cmd5"></td>
                </tr> -->
            </table>
            <h3 data-toggle="collapse" data-target="#subr1_div">Subroutine 1</h3>

            <div id="subr1_div" class="collapse">
                <table class="table table-striped">
                    <p>some text for now</p>
                </table>
            </div>
            <h3 data-toggle="collapse" data-target="#subr2_div">Subroutine 2</h3>

            <div id="subr2_div" class="collapse">
                <table class="table table-striped">
                    <p>some more text for now</p>
                </table>
            </div>
            <button id="btn_save" class="btn btn-lg btn-success" disabled>Save</button>
            <button id="btn_start" class="btn btn-lg btn-success" disabled>Start</button>
            <button id="btn_stop" class="btn btn-lg brn-warning" hidden="hidden">Stop</button>
        </div>
        <div class="col-md-6 col-lg-7">
            <h2>Video Feed</h2>
            <video id="remote-video" autoplay="autoplay" style="align-content: center"></video>
        </div>
    </div>
</div>
<script>
    var socket = io();
</script>
<script src="controller.js"></script>
<!--script src="webrtc.js"></script-->
<script>
    var cmdCnt = 0;

/*    var numPadHtmlold = '\
            <ul class="numpad"> \
            <li class="btn btn-md" rel="1">1</li> \
            <li class="btn btn-md" rel="2">2</li> \
            <li class="btn btn-md" rel="3">3</li> \
            <li class="btn btn-md" rel="4">4</li> \
            <li class="btn btn-md" rel="5">5</li> \
            <li class="btn btn-md" rel="6">6</li> \
            <li class="btn btn-md" rel="7">7</li> \
            <li class="btn btn-md" rel="8">8</li> \
            <li class="btn btn-md" rel="9">9</li> \
                </ul>';
*/
    var numPadHtml = '<div class="numpad">\
                    <button class="numPadBtn">1</button><button class="numPadBtn">2</button><button class="numPadBtn">3</button><br> \
                    <button class="numPadBtn">4</button><button class="numPadBtn">5</button><button class="numPadBtn">6</button><br> \
                    <button class="numPadBtn">7</button><button class="numPadBtn">8</button><button class="numPadBtn">9</button><br></div>';


    $(document).ready(function () {

        $('.command').click(function () {
            cmdCnt++;
            var rowText =
                    '<tr>' +
                    '<td>' + cmdCnt + '</td>' +
                    '<td>' + $(this)[0].innerText + '</td>' +
                    '<td><button id="tBtn'+ cmdCnt + '" rel="popover" class="btn cmdTimer" data-toggle="popover">1</button><td>' +
                    '<td><a class="btn btn-link pull-right"><i class="fa fa-times-circle" aria-hidden="true"></i></a></td>' +
                    '</tr>';
            $('#mainPrg').append(rowText);
            $('[data-toggle=popover]').popover({
                content: numPadHtml,
                html: true
            }).click(function () {
                $(this).popover('show');
            });

        });
    });
/*
    $('.numPadBtn').click(function(){
        console.log('numpad click');
    });*/

    var currentCmd;

    $(document).on('click', '.cmdTimer', function(){
        console.log($(this)[0].id);
        currentCmd = $(this)[0].id;
    });

    $(document).on('click', '.numPadBtn', function(){
        console.log($(this));
        $('[data-toggle=popover]').popover('hide');
        $('#' + currentCmd)[0].innerHTML = $(this)[0].innerHTML;
    });

</script>
</body>
</html>
